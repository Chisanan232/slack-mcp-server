---
id: integrated-server
title: Integrated Server Mode
sidebar_position: 6
---

# Integrated Server Mode

The integrated server mode combines both MCP (Model Context Protocol) and webhook functionalities in a single FastAPI application. This unified deployment approach provides complete Slack integration capabilities.

For detailed architectural information, see [Integrated Server Architecture](/dev/next/architecture/integrated-server-architecture).

## Endpoint Overview

**Base URL**: `http://your-server:port`
**MCP Endpoints**: `/mcp` (SSE) or `/` (HTTP streaming)
**Webhook Endpoint**: `POST /slack/events`

## API Endpoints

### MCP Endpoints

#### SSE Transport Mode
```bash
# Enable SSE transport (default)
python -m slack_mcp.webhook --integrated --mcp-transport sse
```

**Endpoints:**
- **GET** `/mcp` - MCP Server-Sent Events endpoint
- **POST** `/mcp` - MCP HTTP requests (optional)

#### HTTP Streaming Transport Mode
```bash
# Enable HTTP streaming transport
python -m slack_mcp.webhook --integrated --mcp-transport streamable-http
```

**Endpoints:**
- **POST** `/` - MCP HTTP streaming endpoint

### Webhook Endpoints

**Primary webhook endpoint (same as standalone mode):**
- **POST** `/slack/events` - Slack events webhook

**Request Headers:**
```http
Content-Type: application/json
X-Slack-Signature: v0=<signature>
X-Slack-Request-Timestamp: <timestamp>
```

**Response:**
```http
HTTP/1.1 200 OK
Content-Type: application/json

{"status": "ok"}
```

## Command Line Usage

### Basic Commands

```bash
# Start integrated server with default SSE transport
python -m slack_mcp.webhook --integrated

# Explicit configuration
python -m slack_mcp.webhook \
  --integrated \
  --mcp-transport sse \
  --mcp-mount-path /mcp \
  --host 0.0.0.0 \
  --port 3000
```

### Environment-Specific Examples

```bash
# Development
python -m slack_mcp.webhook \
  --integrated \
  --host 127.0.0.1 \
  --port 3000 \
  --log-level DEBUG \
  --mcp-transport sse \
  --env-file .env.development

# Production with HTTP streaming
python -m slack_mcp.webhook \
  --integrated \
  --host 0.0.0.0 \
  --port 8080 \
  --log-level INFO \
  --mcp-transport streamable-http \
  --env-file .env.production \
  --retry 5

# Cloud deployment
python -m slack_mcp.webhook \
  --integrated \
  --host 0.0.0.0 \
  --port ${PORT} \
  --mcp-transport sse \
  --no-env-file
```

## Configuration Options

### CLI Arguments (Integrated Mode)

| Argument | Type | Default | Description |
|----------|------|---------|-------------|
| `--integrated` | `flag` | `False` | **Enable integrated mode** |
| `--mcp-transport` | `choice` | `"sse"` | MCP transport: `sse` or `streamable-http` |
| `--mcp-mount-path` | `string` | `"/mcp"` | MCP mount path (SSE transport only) |
| `--host` | `string` | `"0.0.0.0"` | Server bind address |
| `--port` | `int` | `3000` | Server port |
| `--log-level` | `string` | `"INFO"` | Logging verbosity |
| `--slack-token` | `string` | `None` | Override bot token |
| `--env-file` | `string` | `".env"` | Environment file path |
| `--no-env-file` | `flag` | `False` | Disable env file loading |
| `--retry` | `int` | `3` | Network retry attempts |

### MCP Transport Configuration

#### SSE Transport (Default)
```bash
# Custom mount path for SSE transport
python -m slack_mcp.webhook \
  --integrated \
  --mcp-transport sse \
  --mcp-mount-path /api/mcp
```

#### HTTP Streaming Transport
```bash
# HTTP streaming for load balancer compatibility
python -m slack_mcp.webhook \
  --integrated \
  --mcp-transport streamable-http
```

### Environment Variables

**Required:**
```bash
export SLACK_SIGNING_SECRET="your_signing_secret_here"
export SLACK_BOT_TOKEN="xoxb-your-bot-token-here"
```

**Optional:**
```bash
# Webhook queue configuration
export SLACK_EVENTS_TOPIC="integrated_slack_events"

# Queue backend
export QUEUE_BACKEND_TYPE="redis"
export REDIS_URL="redis://localhost:6379/0"

# Server configuration
export HOST="0.0.0.0"
export PORT="8080"
export LOG_LEVEL="INFO"
export MCP_TRANSPORT="sse"
export MCP_MOUNT_PATH="/mcp"
```

## MCP Tools Available

The integrated server provides 6 MCP tools for Slack integration:

1. **post_slack_message** - Send messages to channels
2. **read_slack_channels** - List and read channel information  
3. **reply_to_slack_thread** - Reply to message threads
4. **add_slack_reaction** - Add emoji reactions to messages
5. **read_slack_emojis** - Get workspace emoji information
6. **read_slack_threads** - Read message thread contents

## Response Codes

| Status | Description |
|--------|-------------|
| `200 OK` | Request processed successfully |
| `400 Bad Request` | Invalid request format or headers |
| `401 Unauthorized` | Authentication failed |
| `500 Internal Server Error` | Server processing error |

---

**For deployment patterns, scaling, and architectural details, see [Integrated Server Architecture](/dev/next/architecture/integrated-server-architecture).**
