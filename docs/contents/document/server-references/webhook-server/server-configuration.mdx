---
id: server-configuration
title: Server Configuration
sidebar_position: 4
---

# Server Configuration

The Slack MCP webhook server provides comprehensive configuration options through command-line arguments, environment variables, and configuration files. This guide covers all available configuration options for both development and production deployments.

## CLI Options Overview

The webhook server supports a rich set of command-line options for flexible deployment:

```bash
python -m slack_mcp.webhook [OPTIONS]
```

### Core Server Options

#### Host and Port Configuration

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `--host` | `string` | `"0.0.0.0"` | Host interface to bind the server to |
| `--port` | `integer` | `3000` | Port number to listen on |

**Examples:**
```bash
# Listen on localhost only (development)
python -m slack_mcp.webhook --host 127.0.0.1 --port 3000

# Listen on all interfaces (production)
python -m slack_mcp.webhook --host 0.0.0.0 --port 8080

# Use environment PORT variable (common in cloud deployments)
PORT=8000 python -m slack_mcp.webhook --port $PORT
```

#### Logging Configuration

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `--log-level` | `string` | `"INFO"` | Python logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL) |

**Examples:**
```bash
# Enable debug logging for development
python -m slack_mcp.webhook --log-level DEBUG

# Quiet logging for production
python -m slack_mcp.webhook --log-level WARNING

# Verbose logging for troubleshooting
python -m slack_mcp.webhook --log-level DEBUG
```

**Available Log Levels:**
- `DEBUG` - Detailed information for debugging
- `INFO` - General information about server operation
- `WARNING` - Warning messages for potential issues
- `ERROR` - Error messages for failures
- `CRITICAL` - Critical errors that may cause server shutdown

### Authentication Options

#### Slack Token Configuration

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `--slack-token` | `string` | `None` | Slack bot token (overrides environment variables) |

**Examples:**
```bash
# Provide token via CLI (not recommended for production)
python -m slack_mcp.webhook --slack-token "xoxb-your-token-here"

# Use environment variable (recommended)
export SLACK_BOT_TOKEN="xoxb-your-token-here"
python -m slack_mcp.webhook
```

### Environment File Options

#### Environment File Loading

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `--env-file` | `string` | `".env"` | Path to environment file to load |
| `--no-env-file` | `flag` | `False` | Disable automatic environment file loading |

**Examples:**
```bash
# Use custom environment file
python -m slack_mcp.webhook --env-file /etc/webhook/.env.production

# Use environment file from different directory
python -m slack_mcp.webhook --env-file ../config/.env.staging

# Disable environment file loading
python -m slack_mcp.webhook --no-env-file
```

### Server Mode Options

#### Integrated vs Standalone Mode

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `--integrated` | `flag` | `False` | Run integrated server (MCP + Webhook) |
| `--mcp-transport` | `choice` | `"sse"` | MCP transport type: `sse` or `streamable-http` |
| `--mcp-mount-path` | `string` | `"/mcp"` | Mount path for MCP server (SSE transport only) |

**Examples:**
```bash
# Standalone webhook server (default)
python -m slack_mcp.webhook

# Integrated server with SSE transport
python -m slack_mcp.webhook --integrated --mcp-transport sse

# Integrated server with HTTP streaming
python -m slack_mcp.webhook --integrated --mcp-transport streamable-http

# Custom MCP mount path
python -m slack_mcp.webhook --integrated --mcp-mount-path /api/mcp
```

### Network and Reliability Options

#### Retry Configuration

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `--retry` | `integer` | `3` | Number of retry attempts for network operations |

**Examples:**
```bash
# Disable retries (not recommended for production)
python -m slack_mcp.webhook --retry 0

# Conservative retry policy
python -m slack_mcp.webhook --retry 1

# Aggressive retry policy for unreliable networks
python -m slack_mcp.webhook --retry 10
```

## Complete CLI Examples

### Development Configuration

```bash
# Basic development setup
python -m slack_mcp.webhook \
  --host 127.0.0.1 \
  --port 3000 \
  --log-level DEBUG \
  --env-file .env.development

# Development with integrated MCP server
python -m slack_mcp.webhook \
  --host 127.0.0.1 \
  --port 3000 \
  --log-level DEBUG \
  --integrated \
  --mcp-transport sse \
  --retry 1
```

### Production Configuration

```bash
# Production standalone webhook server
python -m slack_mcp.webhook \
  --host 0.0.0.0 \
  --port 8080 \
  --log-level INFO \
  --env-file /etc/webhook/.env.production \
  --retry 3

# Production integrated server
python -m slack_mcp.webhook \
  --host 0.0.0.0 \
  --port 8080 \
  --log-level WARNING \
  --env-file /etc/webhook/.env.production \
  --integrated \
  --mcp-transport sse \
  --mcp-mount-path /mcp \
  --retry 5
```

### Cloud Deployment Configuration

```bash
# Heroku-style deployment
python -m slack_mcp.webhook \
  --host 0.0.0.0 \
  --port ${PORT:-3000} \
  --log-level INFO \
  --no-env-file \
  --retry 3

# Container deployment
python -m slack_mcp.webhook \
  --host 0.0.0.0 \
  --port 8000 \
  --log-level INFO \
  --env-file /app/config/.env \
  --integrated \
  --retry 5
```

## Environment Variables

### Required Environment Variables

```bash
# Slack authentication (required)
export SLACK_BOT_TOKEN="xoxb-your-bot-token-here"
export SLACK_SIGNING_SECRET="your_32_character_signing_secret"
```

### Optional Environment Variables

```bash
# Additional Slack credentials
export SLACK_BOT_ID="your-slack-bot-id"
export SLACK_USER_TOKEN="xoxp-your-user-token"  # For user-level operations

# Test channel configuration (for development/testing)
export SLACK_TEST_CHANNEL="#your-channel-name"
export SLACK_TEST_CHANNEL_ID="C1234567890"

# Queue backend configuration
export QUEUE_BACKEND="memory"  # memory | redis | kafka

# Redis backend settings (when QUEUE_BACKEND=redis)
export REDIS_URL="redis://localhost:6379/0"

# Kafka backend settings (when QUEUE_BACKEND=kafka)
export KAFKA_BOOTSTRAP="broker:9092"
```

### Environment File Format

Create a `.env` file for environment-specific configuration:

```bash
# .env.production
# Slack credentials
SLACK_BOT_ID=B9876543210
SLACK_BOT_TOKEN=xoxb-production-bot-token
SLACK_USER_TOKEN=xoxp-production-user-token
SLACK_SIGNING_SECRET=your_production_signing_secret

# Production channel configuration
SLACK_TEST_CHANNEL=#production-alerts
SLACK_TEST_CHANNEL_ID=C9876543210

# Queue backend (Redis for production)
QUEUE_BACKEND=redis
REDIS_URL=redis://prod-redis:6379/0
```

## Configuration Validation

### Startup Validation

The server performs validation on startup:

```python
# Environment validation
if not signing_secret:
    _LOG.error("SLACK_SIGNING_SECRET not set in environment")
    raise ValueError("Missing required environment variable")

# Port validation
if not (1 <= port <= 65535):
    raise ValueError(f"Invalid port number: {port}")

# Retry validation
if retry < 0:
    raise ValueError("Retry count must be non-negative")
```

### Configuration Testing

Test your configuration before deployment:

```bash
# Test configuration without starting server
python -c "
from slack_mcp.webhook.cli.options import _parse_args
from slack_mcp.webhook.server import initialize_slack_client
import os

# Test CLI parsing
args = _parse_args(['--host', '0.0.0.0', '--port', '3000'])
print(f'Configuration: host={args.host}, port={args.port}')

# Test environment variables
required_vars = ['SLACK_SIGNING_SECRET', 'SLACK_BOT_TOKEN']
for var in required_vars:
    if not os.environ.get(var):
        print(f'WARNING: {var} not set')
    else:
        print(f'✓ {var} configured')

# Test Slack client initialization
try:
    client = initialize_slack_client()
    print('✓ Slack client initialized successfully')
except Exception as e:
    print(f'✗ Slack client initialization failed: {e}')
"
```

## Queue Backend Environment Variables

### Memory Backend Configuration (Default)

```bash
# For development/testing only
export QUEUE_BACKEND="memory"
```

**Use cases:**
- Local development
- Unit testing  
- Single-process deployments

**Limitations:**
- Messages lost on restart
- Not suitable for production
- Single process only

### Redis Backend Configuration

```bash
# Redis connection settings
export QUEUE_BACKEND="redis"
export REDIS_URL="redis://localhost:6379/0"

# Advanced Redis settings (if supported by redis backend plugin)
export REDIS_MAX_CONNECTIONS=20
export REDIS_RETRY_ON_TIMEOUT=true
export REDIS_SOCKET_KEEPALIVE=true
```

**Use cases:**
- Production deployments
- Multi-process applications
- Distributed systems
- High availability setups

### Kafka Backend Configuration

```bash
# Kafka connection settings
export QUEUE_BACKEND="kafka"
export KAFKA_BOOTSTRAP="broker:9092"

# Advanced Kafka settings (if supported by kafka backend plugin)
export KAFKA_TOPIC_PREFIX="slack_mcp"
export KAFKA_CONSUMER_GROUP="mcp_consumers"
export KAFKA_AUTO_OFFSET_RESET="earliest"
```

**Use cases:**
- High-throughput applications
- Event streaming
- Complex event processing
- Enterprise deployments

**For deployment patterns, performance optimization, and architectural details, see [Webhook Server Architecture](/dev/next/architecture/webhook-server-architecture).**


## Troubleshooting Configuration Issues

### Common Configuration Problems

#### 1. Port Already in Use

**Error**: `OSError: [Errno 48] Address already in use`

**Solutions**:
```bash
# Find process using the port
lsof -i :3000

# Use a different port
python -m slack_mcp.webhook --port 3001

# Kill the conflicting process
kill -9 <PID>
```

#### 2. Permission Denied (Port < 1024)

**Error**: `PermissionError: [Errno 13] Permission denied`

**Solutions**:
```bash
# Use port > 1024
python -m slack_mcp.webhook --port 8080

# Or run with sudo (not recommended)
sudo python -m slack_mcp.webhook --port 80
```

#### 3. Environment Variables Not Loading

**Error**: `SLACK_SIGNING_SECRET not set in environment`

**Solutions**:
```bash
# Check if .env file exists
ls -la .env

# Verify environment file format
cat .env

# Test environment loading
python -c "from dotenv import load_dotenv; load_dotenv(); import os; print(os.environ.get('SLACK_SIGNING_SECRET'))"
```

### Configuration Validation Script

Create a validation script to test your configuration:

```python
#!/usr/bin/env python3
"""Configuration validation script for Slack MCP webhook server."""

import os
import sys
from slack_mcp.webhook.cli.options import _parse_args

def validate_configuration():
    """Validate server configuration."""
    errors = []
    warnings = []
    
    # Check required environment variables
    required_vars = ['SLACK_SIGNING_SECRET', 'SLACK_BOT_TOKEN']
    for var in required_vars:
        if not os.environ.get(var):
            errors.append(f"Required environment variable {var} is not set")
    
    # Check optional environment variables
    optional_vars = ['SLACK_EVENTS_TOPIC', 'REDIS_URL']
    for var in optional_vars:
        if not os.environ.get(var):
            warnings.append(f"Optional environment variable {var} is not set")
    
    # Validate CLI arguments
    try:
        args = _parse_args()
        
        # Validate port range
        if not (1 <= args.port <= 65535):
            errors.append(f"Invalid port number: {args.port}")
        
        # Validate retry count
        if args.retry < 0:
            errors.append(f"Invalid retry count: {args.retry}")
            
    except Exception as e:
        errors.append(f"CLI argument parsing failed: {e}")
    
    # Print results
    if errors:
        print("❌ Configuration Errors:")
        for error in errors:
            print(f"  • {error}")
    
    if warnings:
        print("⚠️  Configuration Warnings:")
        for warning in warnings:
            print(f"  • {warning}")
    
    if not errors and not warnings:
        print("✅ Configuration is valid!")
    
    return len(errors) == 0

if __name__ == "__main__":
    if not validate_configuration():
        sys.exit(1)
```
