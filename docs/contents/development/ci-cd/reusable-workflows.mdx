---
title: Reusable Workflows
sidebar_position: 5
---

import TOCInline from '@theme/TOCInline';

# Reusable Workflows & Architecture

![Reusable Components](https://img.shields.io/badge/Architecture-Modular-blue?style=for-the-badge)
![DRY Principle](https://img.shields.io/badge/Design-DRY%20Principle-green?style=for-the-badge)
![Standardized](https://img.shields.io/badge/Operations-Standardized-orange?style=for-the-badge)

The slack-mcp-server CI/CD system utilizes reusable workflows that provide standardized build, test, and validation operations. This modular architecture promotes consistency, maintainability, and follows the DRY (Don't Repeat Yourself) principle.

<TOCInline toc={toc} />

## Architecture Overview

The reusable workflows in this project provide:

- **Standardized Build Operations**: Consistent Python package building and testing
- **Unified Testing Interface**: Multi-Python version testing with comprehensive coverage
- **Modular Components**: Reusable testing and coverage workflows
- **Cross-Workflow Integration**: Shared components across CI, release, and validation workflows
- **Enhanced Maintainability**: Centralized logic for common operations

## Core Reusable Workflows

### 1. Build and Test Workflow ([`rw_build_and_test.yaml`](https://github.com/Chisanan232/slack-mcp-server/blob/master/.github/workflows/rw_build_and_test.yaml))

**Purpose**: Standardized Python package building and testing operations with UV toolchain integration.

**Usage in CI workflows:**
```yaml
uses: ./.github/workflows/rw_build_and_test.yaml
with:
  python-version: '3.11'
  uv-version: 'latest'
```

**Key Features**:
- **UV Integration**: Fast, modern Python package management and building
- **Lock File Sync**: Automatic `uv.lock` synchronization and validation
- **Dependency Management**: Comprehensive dependency installation and caching
- **Build Validation**: Ensures packages build correctly with proper metadata

### 2. Multi-Python Version Testing ([`rw_uv_run_test_with_multi_py_versions.yaml`](https://github.com/Chisanan232/slack-mcp-server/blob/master/.github/workflows/rw_uv_run_test_with_multi_py_versions.yaml))

**Purpose**: Comprehensive testing across multiple Python versions with UV toolchain.

**Matrix Strategy:**
```yaml
uses: ./.github/workflows/rw_uv_run_test_with_multi_py_versions.yaml
with:
  python-versions: '["3.9", "3.10", "3.11", "3.12"]'
  test-type: 'unit'  # or 'integration', 'e2e'
```

**Key Features**:
- **Matrix Testing**: Parallel execution across multiple Python versions
- **UV Test Integration**: Uses `uv run` for consistent test environments
- **Flexible Test Types**: Supports unit, integration, and end-to-end testing
- **Version Compatibility**: Validates package compatibility across Python versions

### 3. Test Execution and Recording ([`rw_run_all_test_and_record.yaml`](https://github.com/Chisanan232/slack-mcp-server/blob/master/.github/workflows/rw_run_all_test_and_record.yaml))

**Purpose**: Comprehensive test execution with detailed recording and artifact management.

**Usage Example:**
```yaml
uses: ./.github/workflows/rw_run_all_test_and_record.yaml
with:
  test-suite: 'all'  # or 'unit', 'integration', 'contract'
  record-artifacts: true
  python-version: '3.11'
```

**Key Features**:
- **Complete Test Suite**: Executes all test types (unit, integration, contract)
- **Test Recording**: Captures test results, logs, and performance metrics
- **Artifact Management**: Organizes and uploads test artifacts
- **Failure Analysis**: Detailed reporting for failed tests

### 4. Coverage Report Organization ([`rw_organize_test_cov_reports.yaml`](https://github.com/Chisanan232/slack-mcp-server/blob/master/.github/workflows/rw_organize_test_cov_reports.yaml))

**Purpose**: Standardized test coverage reporting and organization.

**Coverage Integration:**
```yaml
uses: ./.github/workflows/rw_organize_test_cov_reports.yaml
with:
  coverage-format: 'xml'  # or 'html', 'json'
  upload-codecov: true
  merge-reports: true
```

**Key Features**:
- **Multi-Format Support**: Generates coverage in XML, HTML, and JSON formats
- **Report Merging**: Combines coverage from multiple test runs
- **Codecov Integration**: Automatic upload to Codecov for tracking
- **Artifact Organization**: Structured storage of coverage reports

## Workflow Integration Patterns

### Standard Integration Pattern

The reusable workflows follow a consistent integration pattern across consuming workflows:

```yaml
jobs:
  build-and-test:
    uses: ./.github/workflows/rw_build_and_test.yaml
    with:
      python-version: '3.11'
      uv-version: 'latest'
    secrets: inherit
```

### Multi-Python Testing Pattern

CI workflows integrate multi-version testing for comprehensive compatibility validation:

```yaml
jobs:
  # Main build and test
  build_and_test:
    uses: ./.github/workflows/rw_build_and_test.yaml
    with:
      python-version: '3.11'
  
  # Multi-Python version testing
  test_multi_versions:
    needs: [build_and_test]
    uses: ./.github/workflows/rw_uv_run_test_with_multi_py_versions.yaml
    with:
      python-versions: '["3.9", "3.10", "3.11", "3.12"]'
      test-type: 'unit'
  
  # Comprehensive test execution
  run_all_tests:
    needs: [test_multi_versions]
    uses: ./.github/workflows/rw_run_all_test_and_record.yaml
    with:
      test-suite: 'all'
      record-artifacts: true
  
  # Coverage organization
  organize_coverage:
    needs: [run_all_tests]
    uses: ./.github/workflows/rw_organize_test_cov_reports.yaml
    with:
      coverage-format: 'xml'
      upload-codecov: true
```

### Conditional Execution Patterns

Reusable workflows support conditional execution based on triggers and configurations:

```yaml
jobs:
  # Run comprehensive tests only on main branch
  comprehensive_tests:
    if: github.ref == 'refs/heads/main'
    uses: ./.github/workflows/rw_run_all_test_and_record.yaml
    with:
      test-suite: 'all'
      record-artifacts: true
  
  # Run quick tests on feature branches
  quick_tests:
    if: github.ref != 'refs/heads/main'
    uses: ./.github/workflows/rw_uv_run_test_with_multi_py_versions.yaml
    with:
      python-versions: '["3.11"]'
      test-type: 'unit'
```

## Architecture Benefits

### DRY Principle Implementation

**Before Reusable Workflows**:
- Python build and test logic duplicated across multiple workflows
- Inconsistent test execution patterns
- Divergent coverage reporting implementations
- Maintenance burden across multiple files

**With Reusable Workflows**:
- Single source of truth for build, test, and coverage operations
- Consistent Python version testing across all workflows
- Centralized UV toolchain usage and configuration
- Simplified maintenance and updates

### Consistency Guarantees

**Standardized Operations**:
- All Python builds use identical UV toolchain settings
- Multi-version testing follows the same comprehensive process
- Coverage reporting maintains consistent format and upload patterns
- Test execution uses unified artifact management

### Enhanced Maintainability

**Centralized Logic**:
- UV toolchain improvements benefit all workflows automatically
- Python version updates require changes in single location
- Bug fixes propagate across entire test system
- New testing features available to all consuming workflows

### Improved Testing

**Component Isolation**:
- Each reusable workflow can be tested independently
- Clear separation between build, test, and coverage operations
- Simplified debugging of test failures
- Consistent artifact organization

## Configuration Management

### Parameter Standardization

All reusable workflows follow consistent parameter naming conventions:

```yaml
# Standard parameters across Python workflows
inputs:
  python-version:
    description: 'Python version for operations'
    type: string
    default: '3.11'
  
  uv-version:
    description: 'UV version to use'
    type: string
    default: 'latest'
  
  test-type:
    description: 'Type of tests to run'
    type: string
    default: 'unit'
```

### Secret Management

**Inherited Secrets Pattern**:
```yaml
# Consuming workflows pass all secrets to reusable workflows
secrets: inherit
```

### Permission Management

**Standard Permissions**:
```yaml
permissions:
  contents: read        # Repository access
  actions: read        # Artifact access
  checks: write        # Test result reporting
```

## Best Practices

### For Workflow Consumers

1. **Dependency Order**: Ensure proper `needs` relationships between workflow jobs
2. **Python Version Consistency**: Use consistent Python versions across related jobs
3. **Conditional Logic**: Use appropriate conditions for optional test operations
4. **Artifact Management**: Follow consistent naming for test artifacts
5. **Error Handling**: Handle reusable workflow failures appropriately

### Performance Optimization

**Matrix Strategies**:
```yaml
# Multi-Python version testing with matrix execution
strategy:
  matrix:
    python-version: ['3.9', '3.10', '3.11', '3.12']
    
uses: ./.github/workflows/rw_uv_run_test_with_multi_py_versions.yaml
with:
  python-versions: ${{ toJson(matrix.python-version) }}
```

**Caching Strategies**:
- UV cache for faster dependency installation
- Python package cache for faster builds
- Test artifact caching between workflow runs
- Coverage report caching for incremental analysis

---

ðŸ”— **Related Documentation**:
- [Release System](./release-system.mdx) - See how reusable workflows integrate into release pipelines
- [Continuous Integration](./continuous-integration.mdx) - Understanding CI workflow usage
- [Developer Guide](./developer-guide.mdx) - Advanced configuration and troubleshooting
